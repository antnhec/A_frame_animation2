<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- Super Hands for grabbing/rotating -->
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene>

      <!-- Assets: Videos -->
      <a-assets>
        <video id="video1" src="https://www.w3schools.com/html/mov_bbb.mp4" autoplay loop muted></video>
        <video id="video2" src="https://www.w3schools.com/html/movie.mp4" autoplay loop muted></video>
        <video id="video3" src="https://www.w3schools.com/html/mov_bbb.mp4" autoplay loop muted></video>
      </a-assets>

      <!-- Sky and light -->
      <a-sky color="#87CEEB"></a-sky>
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>
      <a-entity light="type: directional; intensity: 1" position="2 4 3"></a-entity>

      <!-- Floor -->
      <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>

      <!-- Box 1 -->
      <a-box id="box1" position="-2 1 -3" width="1" height="1" depth="1"
             material="src: #video1" grabbable
             animation__rotate="property: rotation; from: 0 0 0; to: 0 360 0; dur: 5000; loop: true; easing: linear;"
             animation__move="property: position; from: -2 1 -3; to: -2 2 -3; dur: 3000; dir: alternate; loop: true; easing: easeInOutSine;">
      </a-box>

      <!-- Box 2 -->
      <a-box id="box2" position="0 1 -3" width="1" height="1" depth="1"
             material="src: #video2" grabbable
             animation__rotate="property: rotation; from: 0 0 0; to: 0 360 0; dur: 5000; loop: true; easing: linear;"
             animation__move="property: position; from: 0 1 -3; to: 0 2 -3; dur: 3000; dir: alternate; loop: true; easing: easeInOutSine;">
      </a-box>

      <!-- Box 3 -->
      <a-box id="box3" position="2 1 -3" width="1" height="1" depth="1"
             material="src: #video3" grabbable
             animation__rotate="property: rotation; from: 0 0 0; to: 0 360 0; dur: 5000; loop: true; easing: linear;"
             animation__move="property: position; from: 2 1 -3; to: 2 2 -3; dur: 3000; dir: alternate; loop: true; easing: easeInOutSine;">
      </a-box>

      <!-- Camera with cursor and WASD -->
      <a-entity camera position="0 1.6 5" look-controls wasd-controls>
        <a-cursor fuse="false"></a-cursor>
      </a-entity>

      <!-- Text above boxes -->
      <a-text id="popupText" value="" color="#000000" position="0 3 -3" visible="false"></a-text>

      <!-- Interaction script -->
      <script>
        const boxes = [
          { el: document.querySelector('#box1'), messages: ["Hello please to meet you","I am the cube guardian here","Say the word shazam to pass on"] },
          { el: document.querySelector('#box2'), messages: ["Box 2 says hi","Keep exploring","Almost there!"] },
          { el: document.querySelector('#box3'), messages: ["Third box here","Tap me again","Nice!"] }
        ];

        const text = document.querySelector('#popupText');

        boxes.forEach(boxObj => {
          let index = 0;
          boxObj.el.addEventListener('click', () => {
            text.setAttribute('value', boxObj.messages[index]);
            text.setAttribute('visible', true);

            setTimeout(() => {
              text.setAttribute('visible', false);
            }, 2000);

            index = (index + 1) % boxObj.messages.length;
          });
        });
      </script>

      <!-- Super Hands controllers (optional for grabbing on VR or to
